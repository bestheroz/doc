# Redis Pub/Sub 메시지 처리 시 장애 대응 방법

1. 메시지 영속성 보장

Redis Pub/Sub는 메시지를 영속화하지 않으므로, 메시지 손실을 방지하려면 별도의 저장소에 메시지를 기록해야 합니다.

- 퍼블리셔 측 저장: 퍼블리셔가 메시지를 발행하기 전에 데이터베이스나 로그에 메시지를 저장합니다. 이를 통해 장애 발생 시 손실된 메시지를 복구할 수 있습니다.
- 애플리케이션 레벨 큐: Redis Pub/Sub와 함께 별도의 메시지 큐(예: RabbitMQ, Kafka)를 사용하여 메시지의 영속성을 보장합니다.
- 중요 메시지는 Redis Stream이나 Queue를 병행 사용

2. 메시지 재처리 및 재시도 메커니즘

   - 애플리케이션 레벨 재시도: 메시지 처리 실패 시 일정 횟수까지 재시도하는 로직을 구현합니다.
   - Dead Letter Queue: 처리에 실패한 메시지를 별도의 큐로 이동시켜 이후에 수동으로 처리할 수 있도록 합니다.


3. 대체 메시징 시스템 고려

Redis Pub/Sub의 한계를 보완하기 위해 Redis Streams를 고려할 수 있습니다. Redis Streams는 다음과 같은 기능을 제공하여 보다 안정적인 메시징을 지원합니다:
   - 메시지 영속성
   - 소비자 그룹을 통한 메시지 분배
   - 메시지 ID를 통한 재처리 및 확인

